<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1600 1400">
  <defs>
    <style>
      .title { font-family: Arial, sans-serif; font-size: 28px; font-weight: bold; fill: #1a1a1a; }
      .subtitle { font-family: Arial, sans-serif; font-size: 18px; font-weight: bold; fill: #333; }
      .section-title { font-family: Arial, sans-serif; font-size: 14px; font-weight: bold; fill: #444; }
      .label { font-family: Arial, sans-serif; font-size: 12px; fill: #333; }
      .small-label { font-family: Arial, sans-serif; font-size: 10px; fill: #555; }
      .micro-label { font-family: Arial, sans-serif; font-size: 8px; fill: #666; }
      
      .layer-bg { fill: #f8f9fa; stroke: #dee2e6; stroke-width: 2; rx: 8; }
      .feature-box { fill: #e3f2fd; stroke: #2196f3; stroke-width: 2; rx: 6; }
      .service-box { fill: #e8f5e8; stroke: #4caf50; stroke-width: 2; rx: 6; }
      .core-box { fill: #fff3e0; stroke: #ff9800; stroke-width: 2; rx: 6; }
      .external-box { fill: #fce4ec; stroke: #e91e63; stroke-width: 2; rx: 6; }
      .data-box { fill: #f3e5f5; stroke: #9c27b0; stroke-width: 2; rx: 6; }
      .mcp-box { fill: #e0f2f1; stroke: #009688; stroke-width: 2; rx: 6; }
      .ai-box { fill: #fff8e1; stroke: #ffc107; stroke-width: 2; rx: 6; }
      
      .flow-arrow { stroke: #666; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
      .bi-arrow { stroke: #666; stroke-width: 2; fill: none; marker-start: url(#arrowhead); marker-end: url(#arrowhead); }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#666"/>
    </marker>
  </defs>
  
  <!-- Background -->
  <rect width="1600" height="1400" fill="#ffffff"/>
  
  <!-- Title -->
  <text x="800" y="35" text-anchor="middle" class="title">Asmbli Desktop - Complete System Architecture (2024)</text>
  <text x="800" y="55" text-anchor="middle" class="small-label">Flutter Desktop App ‚Ä¢ AI Agent Ecosystem ‚Ä¢ MCP Integration ‚Ä¢ Design Canvas ‚Ä¢ Multi-Platform</text>
  
  <!-- Presentation Layer -->
  <rect x="50" y="80" width="1500" height="160" class="layer-bg"/>
  <text x="60" y="105" class="subtitle">Presentation Layer - Flutter UI (225 Feature Files)</text>
  
  <!-- Feature Modules -->
  <text x="70" y="125" class="section-title">Core Features:</text>
  
  <rect x="70" y="130" width="140" height="60" class="feature-box"/>
  <text x="140" y="150" text-anchor="middle" class="label">Chat Interface</text>
  <text x="140" y="165" text-anchor="middle" class="small-label">Conversations</text>
  <text x="140" y="180" text-anchor="middle" class="small-label">Contextual Chat</text>
  
  <rect x="220" y="130" width="140" height="60" class="feature-box"/>
  <text x="290" y="150" text-anchor="middle" class="label">Agent Builder</text>
  <text x="290" y="165" text-anchor="middle" class="small-label">Enhanced Builder</text>
  <text x="290" y="180" text-anchor="middle" class="small-label">Capability Selector</text>
  
  <rect x="370" y="130" width="140" height="60" class="feature-box"/>
  <text x="440" y="150" text-anchor="middle" class="label">Canvas Studio</text>
  <text x="440" y="165" text-anchor="middle" class="small-label">Excalidraw</text>
  <text x="440" y="180" text-anchor="middle" class="small-label">Design Agent</text>
  
  <rect x="520" y="130" width="140" height="60" class="feature-box"/>
  <text x="590" y="150" text-anchor="middle" class="label">Settings</text>
  <text x="590" y="165" text-anchor="middle" class="small-label">API Configuration</text>
  <text x="590" y="180" text-anchor="middle" class="small-label">Theme System</text>
  
  <rect x="670" y="130" width="160" height="60" class="feature-box"/>
  <text x="750" y="150" text-anchor="middle" class="label">Design System</text>
  <text x="750" y="165" text-anchor="middle" class="small-label">5 Dynamic Themes</text>
  <text x="750" y="180" text-anchor="middle" class="small-label">Component Library</text>
  
  <rect x="840" y="130" width="140" height="60" class="feature-box"/>
  <text x="910" y="150" text-anchor="middle" class="label">Context Panel</text>
  <text x="910" y="165" text-anchor="middle" class="small-label">Document Context</text>
  <text x="910" y="180" text-anchor="middle" class="small-label">Dynamic Context</text>
  
  <rect x="990" y="130" width="140" height="60" class="feature-box"/>
  <text x="1060" y="150" text-anchor="middle" class="label">Agent Widgets</text>
  <text x="1060" y="165" text-anchor="middle" class="small-label">Status Indicators</text>
  <text x="1060" y="180" text-anchor="middle" class="small-label">Sidebar</text>
  
  <rect x="1140" y="130" width="140" height="60" class="feature-box"/>
  <text x="1210" y="150" text-anchor="middle" class="label">Demo System</text>
  <text x="1210" y="165" text-anchor="middle" class="small-label">Showcase</text>
  <text x="1210" y="180" text-anchor="middle" class="small-label">Examples</text>
  
  <rect x="1290" y="130" width="140" height="60" class="feature-box"/>
  <text x="1360" y="150" text-anchor="middle" class="label">Navigation</text>
  <text x="1360" y="165" text-anchor="middle" class="small-label">App Routes</text>
  <text x="1360" y="180" text-anchor="middle" class="small-label">State Routing</text>
  
  <!-- State Management Layer -->
  <rect x="50" y="260" width="1500" height="100" class="layer-bg"/>
  <text x="60" y="285" class="subtitle">State Management Layer - Riverpod Ecosystem</text>
  
  <rect x="70" y="300" width="200" height="50" class="core-box"/>
  <text x="170" y="320" text-anchor="middle" class="label">State Providers</text>
  <text x="170" y="335" text-anchor="middle" class="small-label">StateNotifier, Future, Stream</text>
  <text x="170" y="345" text-anchor="middle" class="small-label">21+ Provider Files</text>
  
  <rect x="280" y="300" width="180" height="50" class="core-box"/>
  <text x="370" y="320" text-anchor="middle" class="label">Agent State</text>
  <text x="370" y="335" text-anchor="middle" class="small-label">Builder, Enhanced State</text>
  
  <rect x="470" y="300" width="180" height="50" class="core-box"/>
  <text x="560" y="320" text-anchor="middle" class="label">Chat State</text>
  <text x="560" y="335" text-anchor="middle" class="small-label">Conversations, Messages</text>
  
  <rect x="660" y="300" width="180" height="50" class="core-box"/>
  <text x="750" y="320" text-anchor="middle" class="label">Canvas State</text>
  <text x="750" y="335" text-anchor="middle" class="small-label">Excalidraw Elements</text>
  
  <rect x="850" y="300" width="180" height="50" class="core-box"/>
  <text x="940" y="320" text-anchor="middle" class="label">Context State</text>
  <text x="940" y="335" text-anchor="middle" class="small-label">Document Resources</text>
  
  <rect x="1040" y="300" width="180" height="50" class="core-box"/>
  <text x="1130" y="320" text-anchor="middle" class="label">Settings State</text>
  <text x="1130" y="335" text-anchor="middle" class="small-label">Themes, API Config</text>
  
  <rect x="1230" y="300" width="180" height="50" class="core-box"/>
  <text x="1320" y="320" text-anchor="middle" class="label">MCP State</text>
  <text x="1320" y="335" text-anchor="middle" class="small-label">Server Management</text>
  
  <!-- Business Logic Layer -->
  <rect x="50" y="380" width="1500" height="220" class="layer-bg"/>
  <text x="60" y="405" class="subtitle">Business Logic Layer - Service Architecture (151 Services)</text>
  
  <!-- Core Services Section -->
  <text x="70" y="425" class="section-title">Core Services:</text>
  <rect x="70" y="430" width="130" height="45" class="service-box"/>
  <text x="135" y="448" text-anchor="middle" class="label">Service Locator</text>
  <text x="135" y="463" text-anchor="middle" class="small-label">Dependency Injection</text>
  
  <rect x="210" y="430" width="130" height="45" class="service-box"/>
  <text x="275" y="448" text-anchor="middle" class="label">Agent Services</text>
  <text x="275" y="463" text-anchor="middle" class="small-label">CRUD, Management</text>
  
  <rect x="350" y="430" width="130" height="45" class="service-box"/>
  <text x="415" y="448" text-anchor="middle" class="label">Conversation</text>
  <text x="415" y="463" text-anchor="middle" class="small-label">Enhanced Chat</text>
  
  <!-- AI/LLM Services Section -->
  <text x="70" y="490" class="section-title">AI &amp; LLM Services:</text>
  <rect x="70" y="495" width="100" height="45" class="ai-box"/>
  <text x="120" y="513" text-anchor="middle" class="label">Unified LLM</text>
  <text x="120" y="528" text-anchor="middle" class="small-label">Provider Layer</text>
  
  <rect x="180" y="495" width="80" height="45" class="ai-box"/>
  <text x="220" y="513" text-anchor="middle" class="label">OpenAI</text>
  <text x="220" y="528" text-anchor="middle" class="small-label">API + Vision</text>
  
  <rect x="270" y="495" width="80" height="45" class="ai-box"/>
  <text x="310" y="513" text-anchor="middle" class="label">Claude</text>
  <text x="310" y="528" text-anchor="middle" class="small-label">Anthropic</text>
  
  <rect x="360" y="495" width="80" height="45" class="ai-box"/>
  <text x="400" y="513" text-anchor="middle" class="label">Google</text>
  <text x="400" y="528" text-anchor="middle" class="small-label">Gemini</text>
  
  <rect x="450" y="495" width="80" height="45" class="ai-box"/>
  <text x="490" y="513" text-anchor="middle" class="label">Kimi</text>
  <text x="490" y="528" text-anchor="middle" class="small-label">Moonshot</text>
  
  <rect x="540" y="495" width="80" height="45" class="ai-box"/>
  <text x="580" y="513" text-anchor="middle" class="label">Ollama</text>
  <text x="580" y="528" text-anchor="middle" class="small-label">Local LLMs</text>
  
  <!-- Agent Orchestration Section -->
  <text x="640" y="490" class="section-title">Agent Orchestration:</text>
  <rect x="640" y="495" width="120" height="45" class="service-box"/>
  <text x="700" y="513" text-anchor="middle" class="label">Smart Agent</text>
  <text x="700" y="528" text-anchor="middle" class="small-label">Orchestrator</text>
  
  <rect x="770" y="495" width="120" height="45" class="service-box"/>
  <text x="830" y="513" text-anchor="middle" class="label">Design Agent</text>
  <text x="830" y="528" text-anchor="middle" class="small-label">Canvas Integration</text>
  
  <rect x="900" y="495" width="120" height="45" class="service-box"/>
  <text x="960" y="513" text-anchor="middle" class="label">Agent Templates</text>
  <text x="960" y="528" text-anchor="middle" class="small-label">Recommendations</text>
  
  <!-- Business Services Section -->
  <text x="1040" y="490" class="section-title">Business Services:</text>
  <rect x="1040" y="495" width="100" height="45" class="service-box"/>
  <text x="1090" y="513" text-anchor="middle" class="label">Context</text>
  <text x="1090" y="528" text-anchor="middle" class="small-label">Vector Context</text>
  
  <rect x="1150" y="495" width="100" height="45" class="service-box"/>
  <text x="1200" y="513" text-anchor="middle" class="label">Canvas</text>
  <text x="1200" y="528" text-anchor="middle" class="small-label">Code Generation</text>
  
  <rect x="1260" y="495" width="100" height="45" class="service-box"/>
  <text x="1310" y="513" text-anchor="middle" class="label">Security</text>
  <text x="1310" y="528" text-anchor="middle" class="small-label">Auth & Policy</text>
  
  <!-- MCP Ecosystem Section -->
  <text x="70" y="555" class="section-title">MCP Ecosystem (Extensive Integration):</text>
  <rect x="70" y="560" width="100" height="30" class="mcp-box"/>
  <text x="120" y="578" text-anchor="middle" class="small-label">MCP Bridge</text>
  
  <rect x="180" y="560" width="100" height="30" class="mcp-box"/>
  <text x="230" y="578" text-anchor="middle" class="small-label">Catalog Service</text>
  
  <rect x="290" y="560" width="100" height="30" class="mcp-box"/>
  <text x="340" y="578" text-anchor="middle" class="small-label">Server Execution</text>
  
  <rect x="400" y="560" width="100" height="30" class="mcp-box"/>
  <text x="450" y="578" text-anchor="middle" class="small-label">Agent Integration</text>
  
  <rect x="510" y="560" width="100" height="30" class="mcp-box"/>
  <text x="560" y="578" text-anchor="middle" class="small-label">Process Manager</text>
  
  <rect x="620" y="560" width="100" height="30" class="mcp-box"/>
  <text x="670" y="578" text-anchor="middle" class="small-label">Health Monitor</text>
  
  <rect x="730" y="560" width="100" height="30" class="mcp-box"/>
  <text x="780" y="578" text-anchor="middle" class="small-label">Security Validator</text>
  
  <rect x="840" y="560" width="100" height="30" class="mcp-box"/>
  <text x="890" y="578" text-anchor="middle" class="small-label">Registry</text>
  
  <rect x="950" y="560" width="100" height="30" class="mcp-box"/>
  <text x="1000" y="578" text-anchor="middle" class="small-label">Orchestrator</text>
  
  <rect x="1060" y="560" width="100" height="30" class="mcp-box"/>
  <text x="1110" y="578" text-anchor="middle" class="small-label">Terminal Manager</text>
  
  <rect x="1170" y="560" width="100" height="30" class="mcp-box"/>
  <text x="1220" y="578" text-anchor="middle" class="small-label">Configuration</text>
  
  <rect x="1280" y="560" width="100" height="30" class="mcp-box"/>
  <text x="1330" y="578" text-anchor="middle" class="small-label">+ 30 More Services</text>
  
  <!-- Data Persistence Layer -->
  <rect x="50" y="620" width="1500" height="120" class="layer-bg"/>
  <text x="60" y="645" class="subtitle">Data Persistence & Storage Layer</text>
  
  <rect x="70" y="660" width="180" height="70" class="data-box"/>
  <text x="160" y="680" text-anchor="middle" class="label">Desktop Storage</text>
  <text x="160" y="695" text-anchor="middle" class="small-label">Hive (Key-Value)</text>
  <text x="160" y="710" text-anchor="middle" class="small-label">SQLite (Relational)</text>
  <text x="160" y="720" text-anchor="middle" class="small-label">Preferences</text>
  
  <rect x="260" y="660" width="180" height="70" class="data-box"/>
  <text x="350" y="680" text-anchor="middle" class="label">Secure Storage</text>
  <text x="350" y="695" text-anchor="middle" class="small-label">macOS Keychain</text>
  <text x="350" y="710" text-anchor="middle" class="small-label">API Keys</text>
  <text x="350" y="720" text-anchor="middle" class="small-label">OAuth Tokens</text>
  
  <rect x="450" y="660" width="180" height="70" class="data-box"/>
  <text x="540" y="680" text-anchor="middle" class="label">Vector Storage</text>
  <text x="540" y="695" text-anchor="middle" class="small-label">Context Embeddings</text>
  <text x="540" y="710" text-anchor="middle" class="small-label">Document Context</text>
  <text x="540" y="720" text-anchor="middle" class="small-label">Retrieval System</text>
  
  <rect x="640" y="660" width="180" height="70" class="data-box"/>
  <text x="730" y="680" text-anchor="middle" class="label">Canvas Storage</text>
  <text x="730" y="695" text-anchor="middle" class="small-label">Excalidraw Data</text>
  <text x="730" y="710" text-anchor="middle" class="small-label">WebView State</text>
  <text x="730" y="720" text-anchor="middle" class="small-label">Component Library</text>
  
  <rect x="830" y="660" width="180" height="70" class="data-box"/>
  <text x="920" y="680" text-anchor="middle" class="label">File System</text>
  <text x="920" y="695" text-anchor="middle" class="small-label">Local Documents</text>
  <text x="920" y="710" text-anchor="middle" class="small-label">Context Files</text>
  <text x="920" y="720" text-anchor="middle" class="small-label">Access Control</text>
  
  <rect x="1020" y="660" width="180" height="70" class="data-box"/>
  <text x="1110" y="680" text-anchor="middle" class="label">Agent Storage</text>
  <text x="1110" y="695" text-anchor="middle" class="small-label">Agent Configurations</text>
  <text x="1110" y="710" text-anchor="middle" class="small-label">Templates</text>
  <text x="1110" y="720" text-anchor="middle" class="small-label">Chat History</text>
  
  <rect x="1210" y="660" width="180" height="70" class="data-box"/>
  <text x="1300" y="680" text-anchor="middle" class="label">MCP Data</text>
  <text x="1300" y="695" text-anchor="middle" class="small-label">Server Metadata</text>
  <text x="1300" y="710" text-anchor="middle" class="small-label">Process State</text>
  <text x="1300" y="720" text-anchor="middle" class="small-label">Integration Logs</text>
  
  <!-- External Integration Layer -->
  <rect x="50" y="760" width="1500" height="140" class="layer-bg"/>
  <text x="60" y="785" class="subtitle">External Integrations & APIs</text>
  
  <!-- AI Providers Section -->
  <text x="70" y="805" class="section-title">AI Providers:</text>
  <rect x="70" y="810" width="100" height="35" class="external-box"/>
  <text x="120" y="825" text-anchor="middle" class="small-label">OpenAI</text>
  <text x="120" y="835" text-anchor="middle" class="micro-label">GPT-4, Vision API</text>
  
  <rect x="180" y="810" width="100" height="35" class="external-box"/>
  <text x="230" y="825" text-anchor="middle" class="small-label">Anthropic</text>
  <text x="230" y="835" text-anchor="middle" class="micro-label">Claude Models</text>
  
  <rect x="290" y="810" width="100" height="35" class="external-box"/>
  <text x="340" y="825" text-anchor="middle" class="small-label">Google AI</text>
  <text x="340" y="835" text-anchor="middle" class="micro-label">Gemini Pro</text>
  
  <rect x="400" y="810" width="100" height="35" class="external-box"/>
  <text x="450" y="825" text-anchor="middle" class="small-label">Kimi/Moonshot</text>
  <text x="450" y="835" text-anchor="middle" class="micro-label">Chinese LLMs</text>
  
  <!-- Local Infrastructure -->
  <text x="520" y="805" class="section-title">Local Infrastructure:</text>
  <rect x="520" y="810" width="100" height="35" class="external-box"/>
  <text x="570" y="825" text-anchor="middle" class="small-label">Ollama</text>
  <text x="570" y="835" text-anchor="middle" class="micro-label">Local LLMs</text>
  
  <rect x="630" y="810" width="100" height="35" class="external-box"/>
  <text x="680" y="825" text-anchor="middle" class="small-label">Embedded</text>
  <text x="680" y="835" text-anchor="middle" class="micro-label">Vector DB</text>
  
  <!-- MCP Servers -->
  <text x="750" y="805" class="section-title">MCP Server Ecosystem:</text>
  <rect x="750" y="810" width="80" height="35" class="external-box"/>
  <text x="790" y="825" text-anchor="middle" class="small-label">GitHub</text>
  <text x="790" y="835" text-anchor="middle" class="micro-label">Repos</text>
  
  <rect x="840" y="810" width="80" height="35" class="external-box"/>
  <text x="880" y="825" text-anchor="middle" class="small-label">File System</text>
  <text x="880" y="835" text-anchor="middle" class="micro-label">Local Files</text>
  
  <rect x="930" y="810" width="80" height="35" class="external-box"/>
  <text x="970" y="825" text-anchor="middle" class="small-label">Terminal</text>
  <text x="970" y="835" text-anchor="middle" class="micro-label">Commands</text>
  
  <rect x="1020" y="810" width="80" height="35" class="external-box"/>
  <text x="1060" y="825" text-anchor="middle" class="small-label">Database</text>
  <text x="1060" y="835" text-anchor="middle" class="micro-label">SQL/NoSQL</text>
  
  <rect x="1110" y="810" width="80" height="35" class="external-box"/>
  <text x="1150" y="825" text-anchor="middle" class="small-label">Web</text>
  <text x="1150" y="835" text-anchor="middle" class="micro-label">Browser</text>
  
  <rect x="1200" y="810" width="80" height="35" class="external-box"/>
  <text x="1240" y="825" text-anchor="middle" class="small-label">Canvas</text>
  <text x="1240" y="835" text-anchor="middle" class="micro-label">MCP Package</text>
  
  <!-- Platform Services -->
  <text x="70" y="860" class="section-title">Platform Services:</text>
  <rect x="70" y="865" width="120" height="25" class="external-box"/>
  <text x="130" y="880" text-anchor="middle" class="small-label">macOS (Keychain, Services)</text>
  
  <rect x="200" y="865" width="120" height="25" class="external-box"/>
  <text x="260" y="880" text-anchor="middle" class="small-label">Windows (Registry, APIs)</text>
  
  <rect x="330" y="865" width="120" height="25" class="external-box"/>
  <text x="390" y="880" text-anchor="middle" class="small-label">Linux (System Integration)</text>
  
  <!-- Canvas Integration Deep Dive -->
  <rect x="50" y="920" width="1500" height="180" class="layer-bg" fill="#f0f8ff"/>
  <text x="60" y="945" class="subtitle">Canvas Integration Architecture - Design Agent ‚Üî Excalidraw</text>
  
  <!-- Design Agent Flow -->
  <text x="70" y="965" class="section-title">Natural Language Processing Flow:</text>
  <rect x="70" y="970" width="120" height="40" class="ai-box"/>
  <text x="130" y="985" text-anchor="middle" class="label">Design Agent</text>
  <text x="130" y="1000" text-anchor="middle" class="small-label">NL Commands</text>
  
  <rect x="200" y="970" width="120" height="40" class="service-box"/>
  <text x="260" y="985" text-anchor="middle" class="label">Command Parser</text>
  <text x="260" y="1000" text-anchor="middle" class="small-label">Intent Detection</text>
  
  <rect x="330" y="970" width="120" height="40" class="core-box"/>
  <text x="390" y="985" text-anchor="middle" class="label">Component Lib</text>
  <text x="390" y="1000" text-anchor="middle" class="small-label">Flutter Widgets</text>
  
  <rect x="460" y="970" width="120" height="40" class="service-box"/>
  <text x="520" y="985" text-anchor="middle" class="label">Canvas Bridge</text>
  <text x="520" y="1000" text-anchor="middle" class="small-label">JS ‚Üî Flutter</text>
  
  <rect x="590" y="970" width="120" height="40" class="external-box"/>
  <text x="650" y="985" text-anchor="middle" class="label">Excalidraw</text>
  <text x="650" y="1000" text-anchor="middle" class="small-label">WebView Canvas</text>
  
  <!-- Vision Processing Flow -->
  <text x="730" y="965" class="section-title">Vision Processing:</text>
  <rect x="730" y="970" width="120" height="40" class="ai-box"/>
  <text x="790" y="985" text-anchor="middle" class="label">OpenAI Vision</text>
  <text x="790" y="1000" text-anchor="middle" class="small-label">Image ‚Üí Code</text>
  
  <rect x="860" y="970" width="120" height="40" class="ai-box"/>
  <text x="920" y="985" text-anchor="middle" class="label">Local Vision</text>
  <text x="920" y="1000" text-anchor="middle" class="small-label">LLaVA Models</text>
  
  <rect x="990" y="970" width="120" height="40" class="feature-box"/>
  <text x="1050" y="985" text-anchor="middle" class="label">Code Output</text>
  <text x="1050" y="1000" text-anchor="middle" class="small-label">Flutter Code</text>
  
  <!-- Local LLM Architecture -->
  <text x="70" y="1025" class="section-title">Local LLM Architecture (Ollama Integration):</text>
  <rect x="70" y="1030" width="100" height="30" class="ai-box"/>
  <text x="120" y="1048" text-anchor="middle" class="small-label">DeepSeek-R1</text>
  
  <rect x="180" y="1030" width="100" height="30" class="ai-box"/>
  <text x="230" y="1048" text-anchor="middle" class="small-label">LLaVA 13B</text>
  
  <rect x="290" y="1030" width="100" height="30" class="ai-box"/>
  <text x="340" y="1048" text-anchor="middle" class="small-label">Qwen Models</text>
  
  <rect x="400" y="1030" width="100" height="30" class="ai-box"/>
  <text x="450" y="1048" text-anchor="middle" class="small-label">Llama 3.2</text>
  
  <rect x="510" y="1030" width="100" height="30" class="service-box"/>
  <text x="560" y="1048" text-anchor="middle" class="small-label">Dynamic Loading</text>
  
  <!-- Component Creation Pipeline -->
  <text x="70" y="1075" class="section-title">Component Creation Pipeline:</text>
  <rect x="70" y="1080" width="80" height="25" class="core-box"/>
  <text x="110" y="1095" text-anchor="middle" class="micro-label">Dart Models</text>
  
  <rect x="160" y="1080" width="80" height="25" class="core-box"/>
  <text x="200" y="1095" text-anchor="middle" class="micro-label">JS Functions</text>
  
  <rect x="250" y="1080" width="80" height="25" class="core-box"/>
  <text x="290" y="1095" text-anchor="middle" class="micro-label">Excalidraw</text>
  
  <rect x="340" y="1080" width="80" height="25" class="core-box"/>
  <text x="380" y="1095" text-anchor="middle" class="micro-label">Real-time</text>
  
  <!-- Screen Templates -->
  <text x="450" y="1075" class="section-title">Screen Templates:</text>
  <rect x="450" y="1080" width="60" height="25" class="feature-box"/>
  <text x="480" y="1095" text-anchor="middle" class="micro-label">Dashboard</text>
  
  <rect x="520" y="1080" width="60" height="25" class="feature-box"/>
  <text x="550" y="1095" text-anchor="middle" class="micro-label">List</text>
  
  <rect x="590" y="1080" width="60" height="25" class="feature-box"/>
  <text x="620" y="1095" text-anchor="middle" class="micro-label">Form</text>
  
  <rect x="660" y="1080" width="60" height="25" class="feature-box"/>
  <text x="690" y="1095" text-anchor="middle" class="micro-label">Mobile</text>
  
  <!-- MCP Canvas Package -->
  <text x="750" y="1075" class="section-title">MCP Canvas Package (TypeScript):</text>
  <rect x="750" y="1080" width="100" height="25" class="mcp-box"/>
  <text x="800" y="1095" text-anchor="middle" class="micro-label">Canvas Engine</text>
  
  <rect x="860" y="1080" width="100" height="25" class="mcp-box"/>
  <text x="910" y="1095" text-anchor="middle" class="micro-label">Code Exporter</text>
  
  <rect x="970" y="1080" width="100" height="25" class="mcp-box"/>
  <text x="1020" y="1095" text-anchor="middle" class="micro-label">Design Renderer</text>
  
  <rect x="1080" y="1080" width="100" height="25" class="mcp-box"/>
  <text x="1130" y="1095" text-anchor="middle" class="micro-label">Material3 System</text>
  
  <!-- Data Flow Arrows -->
  
  <!-- UI to State -->
  <line x1="140" y1="190" x2="170" y2="300" class="flow-arrow"/>
  <line x1="290" y1="190" x2="370" y2="300" class="flow-arrow"/>
  <line x1="440" y1="190" x2="750" y2="300" class="flow-arrow"/>
  <line x1="910" y1="190" x2="940" y2="300" class="flow-arrow"/>
  
  <!-- State to Services -->
  <line x1="170" y1="350" x2="135" y2="430" class="flow-arrow"/>
  <line x1="370" y1="350" x2="275" y2="430" class="flow-arrow"/>
  <line x1="750" y1="350" x2="830" y2="495" class="flow-arrow"/>
  
  <!-- Services to Storage -->
  <line x1="135" y1="475" x2="160" y2="660" class="flow-arrow"/>
  <line x1="415" y1="475" x2="1110" y2="660" class="flow-arrow"/>
  <line x1="830" y1="540" x2="730" y2="660" class="flow-arrow"/>
  
  <!-- LLM to External -->
  <line x1="220" y1="540" x2="120" y2="810" class="flow-arrow"/>
  <line x1="310" y1="540" x2="230" y2="810" class="flow-arrow"/>
  <line x1="580" y1="540" x2="570" y2="810" class="flow-arrow"/>
  
  <!-- Canvas Flow -->
  <line x1="190" y1="990" x2="200" y2="990" class="flow-arrow"/>
  <line x1="320" y1="990" x2="330" y2="990" class="flow-arrow"/>
  <line x1="450" y1="990" x2="460" y2="990" class="flow-arrow"/>
  <line x1="580" y1="990" x2="590" y2="990" class="flow-arrow"/>
  
  <!-- Component Flow -->
  <line x1="150" y1="1092" x2="160" y2="1092" class="flow-arrow"/>
  <line x1="240" y1="1092" x2="250" y2="1092" class="flow-arrow"/>
  <line x1="330" y1="1092" x2="340" y2="1092" class="flow-arrow"/>
  
  <!-- Statistics and Architecture Summary -->
  <text x="50" y="1135" class="subtitle">Current Architecture Statistics (December 2024):</text>
  <text x="60" y="1155" class="small-label">üèóÔ∏è Architecture Scale:</text>
  <text x="80" y="1170" class="micro-label">‚Ä¢ 151 Service Files (Core Business Logic)</text>
  <text x="80" y="1180" class="micro-label">‚Ä¢ 225 Feature Files (UI Components)</text>
  <text x="80" y="1190" class="micro-label">‚Ä¢ 21+ Riverpod Provider Files (State Management)</text>
  <text x="80" y="1200" class="micro-label">‚Ä¢ 60+ Files in Desktop Platform Layer</text>
  
  <text x="400" y="1155" class="small-label">ü§ñ AI Integration:</text>
  <text x="420" y="1170" class="micro-label">‚Ä¢ 6 AI Provider Integrations (OpenAI, Claude, Google, Kimi, Ollama, Local)</text>
  <text x="420" y="1180" class="micro-label">‚Ä¢ Dual-Model Architecture (Reasoning + Vision)</text>
  <text x="420" y="1190" class="micro-label">‚Ä¢ Natural Language to Canvas Commands</text>
  <text x="420" y="1200" class="micro-label">‚Ä¢ Wireframe-to-Code Generation (OpenAI Vision API)</text>
  
  <text x="800" y="1155" class="small-label">üé® Canvas & Design:</text>
  <text x="820" y="1170" class="micro-label">‚Ä¢ Complete Excalidraw Integration</text>
  <text x="820" y="1180" class="micro-label">‚Ä¢ 50+ Flutter Widget Templates</text>
  <text x="820" y="1190" class="micro-label">‚Ä¢ 5 Dynamic Color Schemes</text>
  <text x="820" y="1200" class="micro-label">‚Ä¢ Real-time Agent-to-Canvas Communication</text>
  
  <text x="1150" y="1155" class="small-label">üîß Infrastructure:</text>
  <text x="1170" y="1170" class="micro-label">‚Ä¢ Cross-platform (macOS, Windows, Linux)</text>
  <text x="1170" y="1180" class="micro-label">‚Ä¢ MCP Server Integration Ecosystem</text>
  <text x="1170" y="1190" class="micro-label">‚Ä¢ Vector Database for Context</text>
  <text x="1170" y="1200" class="micro-label">‚Ä¢ Local LLM Support (Ollama)</text>
  
  <text x="60" y="1220" class="small-label">üìä Service Organization:</text>
  <text x="80" y="1235" class="micro-label">‚Ä¢ Core Services: Authentication, Storage, Configuration</text>
  <text x="80" y="1245" class="micro-label">‚Ä¢ Business Services: Agents, Conversations, Context</text>
  <text x="80" y="1255" class="micro-label">‚Ä¢ Integration Services: MCP, OAuth, External APIs</text>
  <text x="80" y="1265" class="micro-label">‚Ä¢ Platform Services: Desktop, macOS, File System</text>
  
  <text x="500" y="1220" class="small-label">üéØ Key Integrations:</text>
  <text x="520" y="1235" class="micro-label">‚Ä¢ WebView-Flutter Bridge for Excalidraw</text>
  <text x="520" y="1245" class="micro-label">‚Ä¢ JavaScript Component Library</text>
  <text x="520" y="1255" class="micro-label">‚Ä¢ TypeScript MCP Canvas Package</text>
  <text x="520" y="1265" class="micro-label">‚Ä¢ Material Design 3 System Integration</text>
  
  <text x="900" y="1220" class="small-label">üìà Performance & Quality:</text>
  <text x="920" y="1235" class="micro-label">‚Ä¢ Comprehensive Error Handling</text>
  <text x="920" y="1245" class="micro-label">‚Ä¢ Security Policy Engine</text>
  <text x="920" y="1255" class="micro-label">‚Ä¢ Performance Monitoring</text>
  <text x="920" y="1265" class="micro-label">‚Ä¢ Resource Management</text>
  
  <!-- Legend -->
  <text x="50" y="1290" class="subtitle">Component Legend:</text>
  <rect x="50" y="1300" width="40" height="15" class="feature-box"/>
  <text x="100" y="1312" class="micro-label">UI Features</text>
  
  <rect x="180" y="1300" width="40" height="15" class="service-box"/>
  <text x="230" y="1312" class="micro-label">Services</text>
  
  <rect x="290" y="1300" width="40" height="15" class="core-box"/>
  <text x="340" y="1312" class="micro-label">Core Systems</text>
  
  <rect x="420" y="1300" width="40" height="15" class="ai-box"/>
  <text x="470" y="1312" class="micro-label">AI/LLM</text>
  
  <rect x="530" y="1300" width="40" height="15" class="mcp-box"/>
  <text x="580" y="1312" class="micro-label">MCP</text>
  
  <rect x="640" y="1300" width="40" height="15" class="external-box"/>
  <text x="690" y="1312" class="micro-label">External</text>
  
  <rect x="750" y="1300" width="40" height="15" class="data-box"/>
  <text x="800" y="1312" class="micro-label">Storage</text>
  
  <text x="850" y="1312" class="micro-label">‚Üí Data Flow</text>
  
  <!-- Footer -->
  <text x="800" y="1335" text-anchor="middle" class="small-label">Asmbli Desktop - Production-Ready AI Agent Development Platform</text>
  <text x="800" y="1350" text-anchor="middle" class="micro-label">Built with Flutter ‚Ä¢ Powered by AI ‚Ä¢ Extended with MCP ‚Ä¢ December 2024</text>
</svg>